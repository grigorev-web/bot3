---
title: ะกัััะบัััะฐ ะผะพะดัะปะตะน
description: ะะตัะฐะปัะฝะพะต ะพะฟะธัะฐะฝะธะต ะผะพะดัะปะตะน ะฟัะพะตะบัะฐ ะธ ะธั ะฒะทะฐะธะผะพะดะตะนััะฒะธั
category: architecture
tags: [ะผะพะดัะปะธ, ัะพััะตั, llm, ะพะฑัะฐะฑะพััะธะบะธ, ััััะบัััะฐ]
last_updated: 2024-01-01
author: ะะฐะทัะฐะฑะพััะธะบ
version: 4.0.0
related_files: [src/modules/index.js, src/modules/router/router.js, src/handlers/textMessageHandler.js]
---

# ะกัััะบัััะฐ ะผะพะดัะปะตะน

## ๐๏ธ ะะฑัะฐั ะพัะณะฐะฝะธะทะฐัะธั

ะะพะดัะปะธ ะฟัะพะตะบัะฐ ะพัะณะฐะฝะธะทะพะฒะฐะฝั ะฟะพ ะฟัะธะฝัะธะฟั ัะฐะทะดะตะปะตะฝะธั ะพัะฒะตัััะฒะตะฝะฝะพััะธ:

```
src/modules/
โโโ index.js           # ะญะบัะฟะพัั ะฒัะตั ะผะพะดัะปะตะน
โโโ router/            # ะะพะดัะปั ัะพััะธะฝะณะฐ ั LLM
โ   โโโ index.js       # ะญะบัะฟะพัั ัะพััะตัะฐ
โ   โโโ router.js      # ะัะฝะพะฒะฝะฐั ะปะพะณะธะบะฐ LLM ัะพััะตัะฐ
โโโ classifier/        # ะะปะฐััะธัะธะบะฐัะพั (ะทะฐัะตะทะตัะฒะธัะพะฒะฐะฝ)
    โโโ index.js       # ะญะบัะฟะพัั ะบะปะฐััะธัะธะบะฐัะพัะฐ
```

## ๐ง ะัะฝะพะฒะฝัะต ะผะพะดัะปะธ

### 1. LLM Router Module

#### ะะฐะทะฝะฐัะตะฝะธะต
ะัะพััะฐั ะพะฑัะฐะฑะพัะบะฐ ัะพะพะฑัะตะฝะธะน ัะตัะตะท LLM ะฑะตะท ัะปะพะถะฝะพะน ะปะพะณะธะบะธ.

#### ะกัััะบัััะฐ
```javascript
// src/modules/router/router.js
class SimpleRouter {
  constructor()           // ะะฝะธัะธะฐะปะธะทะฐัะธั
  processText(text)      // ะะฑัะฐะฑะพัะบะฐ ัะตะบััะฐ ัะตัะตะท LLM
  createLLMService()     // ะกะพะทะดะฐะฝะธะต LLM ัะตัะฒะธัะฐ
}
```

#### ะัะธะฝัะธะฟ ัะฐะฑะพัั
1. **ะะพะปััะฐะตั ัะตะบัั** ะพั ะพะฑัะฐะฑะพััะธะบะฐ ัะพะพะฑัะตะฝะธะน
2. **ะกะพะทะดะฐะตั LLM ัะตัะฒะธั** (ะปะตะฝะธะฒะฐั ะทะฐะณััะทะบะฐ)
3. **ะะตะปะฐะตั ะทะฐะฟัะพั** ะบ LLM ัะตัะตะท ProxyAPI
4. **ะะพะทะฒัะฐัะฐะตั ะพัะฒะตั** ะพั LLM ะฟะพะปัะทะพะฒะฐัะตะปั

#### ะัะธะผะตั ะธัะฟะพะปัะทะพะฒะฐะฝะธั
```javascript
const router = new SimpleRouter();

// ะะฑัะฐะฑะพัะบะฐ ัะตะบััะฐ ัะตัะตะท LLM
const response = await router.processText('ะัะธะฒะตั, ะบะฐะบ ะดะตะปะฐ?');
console.log(response); // ะัะฒะตั ะพั LLM
```

### 2. Classifier Module (ะะฐัะตะทะตัะฒะธัะพะฒะฐะฝ)

#### ะะฐะทะฝะฐัะตะฝะธะต
ะะฐัะตะทะตัะฒะธัะพะฒะฐะฝ ะดะปั ะฑัะดััะตะน ััะฝะบัะธะพะฝะฐะปัะฝะพััะธ ะบะปะฐััะธัะธะบะฐัะธะธ ัะพะพะฑัะตะฝะธะน.

#### ะขะตะบััะธะน ััะฐััั
- ะะพะดัะปั ัะพะทะดะฐะฝ, ะฝะพ ะฝะต ะธัะฟะพะปัะทัะตััั
- ะะพัะพะฒ ะดะปั ะธะฝัะตะณัะฐัะธะธ ะฒ ะฑัะดััะตะผ
- ะะต ะฒะปะธัะตั ะฝะฐ ัะตะบัััั ััะฝะบัะธะพะฝะฐะปัะฝะพััั

## ๐ ะะทะฐะธะผะพะดะตะนััะฒะธะต ะผะพะดัะปะตะน

### ะกัะตะผะฐ ะฒะทะฐะธะผะพะดะตะนััะฒะธั

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ TextMessage     โ    โ SimpleRouter    โ    โ LLM Service     โ
โ Handler         โโโโโบโ                 โโโโโบโ (ProxyAPI)      โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
         โ                       โ                       โ
         โ                       โ                       โ
         โผ                       โผ                       โผ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ Response        โ    โ LLM Response    โ    โ External        โ
โ Sending         โ    โ Processing      โ    โ LLM API         โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
```

### ะะตัะฐะปัะฝัะน ะฟะพัะพะบ

1. **TextMessageHandler** ะฟะพะปััะฐะตั ัะพะพะฑัะตะฝะธะต
2. **ะกะพะทะดะฐะตั SimpleRouter** (ะปะตะฝะธะฒะฐั ะทะฐะณััะทะบะฐ)
3. **ะะพััะตั ัะพะทะดะฐะตั LLM ัะตัะฒะธั** (ะปะตะฝะธะฒะฐั ะทะฐะณััะทะบะฐ)
4. **ะะตะปะฐะตั ะทะฐะฟัะพั ะบ LLM** ัะตัะตะท ProxyAPI
5. **ะะพะปััะฐะตั ะพัะฒะตั** ะพั LLM
6. **ะัะฒะตั ะพัะฟัะฐะฒะปัะตััั** ะฟะพะปัะทะพะฒะฐัะตะปั

## ๐ ะะฝัะตััะตะนัั ะผะพะดัะปะตะน

### Router Interface
```javascript
/**
 * @interface Router
 * @description ะะฐะทะพะฒัะน ะธะฝัะตััะตะนั ะดะปั LLM ัะพััะตัะพะฒ
 */
class Router {
  /**
   * ะะฑัะฐะฑะฐััะฒะฐะตั ัะตะบััะพะฒะพะต ัะพะพะฑัะตะฝะธะต ัะตัะตะท LLM
   * @param {string} text - ะขะตะบัั ะดะปั ะพะฑัะฐะฑะพัะบะธ
   * @returns {Promise<string>} ะัะฒะตั ะพั LLM
   */
  processText(text) {}
  
  /**
   * ะัะพะฒะตััะตั ะณะพัะพะฒะฝะพััั ัะพััะตัะฐ
   * @returns {boolean} true ะตัะปะธ ะณะพัะพะฒ
   */
  isReady() {}
  
  /**
   * ะะพะปััะฐะตั ะธะฝัะพัะผะฐัะธั ะพ ัะพััะตัะต
   * @returns {Object} ะะฝัะพัะผะฐัะธั ะพ ะผะพะดัะปะต
   */
  getInfo() {}
}
```

## ๐ ะะฐััะธัะตะฝะธะต ะผะพะดัะปะตะน

### ะกะพะทะดะฐะฝะธะต ะฝะพะฒะพะณะพ ะผะพะดัะปั

1. **ะกะพะทะดะฐะนัะต ะฟะฐะฟะบั** ะฒ `src/modules/`
2. **ะกะพะทะดะฐะนัะต index.js** ะดะปั ัะบัะฟะพััะฐ
3. **ะะพะฑะฐะฒััะต ะฒ** `src/modules/index.js`
4. **ะะฑะฝะพะฒะธัะต ะดะพะบัะผะตะฝัะฐัะธั**

#### ะัะธะผะตั ััััะบัััั ะฝะพะฒะพะณะพ ะผะพะดัะปั
```
src/modules/newModule/
โโโ index.js           # ะญะบัะฟะพัั ะผะพะดัะปั
โโโ newModule.js       # ะัะฝะพะฒะฝะฐั ะปะพะณะธะบะฐ
โโโ README.md          # ะะพะบัะผะตะฝัะฐัะธั ะผะพะดัะปั
```

## ๐ ะะพะฝะธัะพัะธะฝะณ ะธ ะพัะปะฐะดะบะฐ

### ะะพะณะธัะพะฒะฐะฝะธะต ะผะพะดัะปะตะน
- **Router**: ะะพะณะธััะตั ัะพะทะดะฐะฝะธะต LLM ัะตัะฒะธัะฐ, ะทะฐะฟัะพัั ะบ LLM
- **Handler**: ะะพะณะธััะตั ะฟะพะปััะตะฝะธะต ัะพะพะฑัะตะฝะธะน ะธ ะฒัะทะพะฒั ัะพััะตัะฐ
- **LLM Service**: ะะพะณะธััะตั ะฒะทะฐะธะผะพะดะตะนััะฒะธะต ั ะฒะฝะตัะฝะธะผะธ API

### ะะตััะธะบะธ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ
- **ะัะตะผั ะพะฑัะฐะฑะพัะบะธ** ัะตะบััะฐ ัะตัะตะท LLM
- **ะัะตะผั ะพัะบะปะธะบะฐ** LLM API
- **ะกัะฐัะธััะธะบะฐ ะธัะฟะพะปัะทะพะฒะฐะฝะธั** LLM
- **ะัะธะฑะบะธ LLM ะธะฝัะตะณัะฐัะธะธ**

### ะัะปะฐะดะบะฐ
```javascript
// ะะพะปััะตะฝะธะต ะธะฝัะพัะผะฐัะธะธ ะพ ัะพััะตัะต
const routerInfo = router.getInfo();
console.log('Router info:', routerInfo);

// ะัะพะฒะตัะบะฐ ะณะพัะพะฒะฝะพััะธ
const isReady = router.isReady();
console.log('Router ready:', isReady);

// ะัะพะฒะตัะบะฐ LLM ัะตัะฒะธัะฐ
const hasLLM = router.llmService !== null;
console.log('Has LLM service:', hasLLM);
```

## ๐ ะกัะฐัะธััะธะบะฐ ะธ ะฐะฝะฐะปะธัะธะบะฐ

### ะกะฑะพั ะดะฐะฝะฝัั
- ะะพะปะธัะตััะฒะพ ะพะฑัะฐะฑะพัะฐะฝะฝัั ัะพะพะฑัะตะฝะธะน ัะตัะตะท LLM
- ะัะตะผั ะพัะบะปะธะบะฐ LLM API
- ะัะธะฑะบะธ ะธ ะธัะบะปััะตะฝะธั LLM
- ะัะฟะพะปัะทะพะฒะฐะฝะธะต ProxyAPI

### ะะธะทัะฐะปะธะทะฐัะธั
- ะัะฐัะธะบะธ ะฒัะตะผะตะฝะธ ะพัะบะปะธะบะฐ LLM
- ะกัะฐัะธััะธะบะฐ ะพัะธะฑะพะบ LLM
- ะะพะฝะธัะพัะธะฝะณ ProxyAPI
- ะััะตัั ะฟะพ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ

## ๐ ะะตะทะพะฟะฐัะฝะพััั ะผะพะดัะปะตะน

### ะะฐะปะธะดะฐัะธั ะฒัะพะดะฝัั ะดะฐะฝะฝัั
- ะัะพะฒะตัะบะฐ ัะธะฟะพะฒ ะฟะฐัะฐะผะตััะพะฒ
- ะกะฐะฝะธัะธะทะฐัะธั ัะตะบััะฐ ะฟะตัะตะด ะพัะฟัะฐะฒะบะพะน ะฒ LLM
- ะะณัะฐะฝะธัะตะฝะธะต ะดะปะธะฝั ัะพะพะฑัะตะฝะธะน
- ะะฐัะธัะฐ ะพั ะธะฝัะตะบัะธะน

### ะะตะทะพะฟะฐัะฝะพััั LLM API
- ะะตะทะพะฟะฐัะฝะพะต ััะฐะฝะตะฝะธะต API ะบะปััะตะน
- ะะฐะปะธะดะฐัะธั ะพัะฒะตัะพะฒ ะพั LLM
- ะะณัะฐะฝะธัะตะฝะธะต ัะฐััะพัั ะทะฐะฟัะพัะพะฒ
- ะะพะณะธัะพะฒะฐะฝะธะต ะฒัะตั LLM ะฒะทะฐะธะผะพะดะตะนััะฒะธะน

## ๐ ะะปะฐะฝั ัะฐะทะฒะธัะธั

### ะัะฐัะบะพััะพัะฝัะต (v4.1)
- [ ] ะฃะปัััะตะฝะธะต ะธะฝัะตะณัะฐัะธะธ ั LLM API
- [ ] ะะฐััะธัะตะฝะธะต ะบะพะฝัะธะณััะฐัะธะธ ProxyAPI
- [ ] ะฃะปัััะตะฝะธะต fallback ะพัะฒะตัะพะฒ

### ะกัะตะดะฝะตััะพัะฝัะต (v4.2)
- [ ] ะััะธัะพะฒะฐะฝะธะต LLM ะพัะฒะตัะพะฒ
- [ ] ะะตััะธะบะธ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ LLM
- [ ] ะกะธััะตะผะฐ ะฟะปะฐะณะธะฝะพะฒ ะดะปั LLM

### ะะพะปะณะพััะพัะฝัะต (v5.0)
- [ ] ะัะปััะธะผะพะดะฐะปัะฝัะต LLM (ะธะทะพะฑัะฐะถะตะฝะธั, ะฐัะดะธะพ)
- [ ] ะะตััะพะฝะฐะปะธะทะฐัะธั LLM ะพัะฒะตัะพะฒ
- [ ] ะะฝัะตะณัะฐัะธั ั ะฒะตะบัะพัะฝัะผะธ ะฑะฐะทะฐะผะธ ะดะฐะฝะฝัั

## ๐ LLM ะธะฝัะตะณัะฐัะธั

### ะะพะดะดะตัะถะธะฒะฐะตะผัะต ะฟัะพะฒะฐะนะดะตัั
- **OpenAI** - GPT-4, GPT-3.5-turbo
- **Anthropic** - Claude Sonnet, Claude Haiku
- **Gemini** - Gemini Pro, Gemini Flash
- **DeepSeek** - DeepSeek Chat

### ProxyAPI ะฟัะตะธะผััะตััะฒะฐ
- ะะดะธะฝัะน API ะดะปั ะฒัะตั ะฟัะพะฒะฐะนะดะตัะพะฒ
- ะะฒัะพะฟะตะนัะบะธะต ัะตัะฒะตัั ะดะปั ััะฐะฑะธะปัะฝะพััะธ
- ะะฒัะพะผะฐัะธัะตัะบะฐั ะผะฐัััััะธะทะฐัะธั ะฟะพ ะผะพะดะตะปัะผ
- ะฃะฟัะฐะฒะปะตะฝะธะต ัะตัะตะท ะตะดะธะฝัะน ะธะฝัะตััะตะนั

---

*ะะปั ะดะตัะฐะปัะฝะพะน ะธะฝัะพัะผะฐัะธะธ ะพ ะบะพะฝะบัะตัะฝัั ะผะพะดัะปัั ัะผ. ัะพะพัะฒะตัััะฒัััะธะต ัะฐะนะปั ะฒ `src/modules/`.*
