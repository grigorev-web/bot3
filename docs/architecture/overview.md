---
title: ะะฑะทะพั ะฐััะธัะตะบัััั
description: ะะฑัะฐั ะฐััะธัะตะบัััะฐ ะฟัะพะตะบัะฐ ะธ ะบะปััะตะฒัะต ะบะพะผะฟะพะฝะตะฝัั
category: architecture
tags: [ะฐััะธัะตะบัััะฐ, ะบะพะผะฟะพะฝะตะฝัั, ะผะพะดัะปะธ, ัะพััะตั, llm]
last_updated: 2024-01-01
author: ะะฐะทัะฐะฑะพััะธะบ
version: 4.0.0
related_files: [src/app/app.js, src/modules/index.js, src/handlers/index.js]
---

# ะะฑะทะพั ะฐััะธัะตะบัััั

## ๐๏ธ ะะฑัะฐั ััััะบัััะฐ

ะัะพะตะบั ะฟะพัััะพะตะฝ ะฝะฐ ะผะพะดัะปัะฝะพะน ะฐััะธัะตะบัััะต ั ัะตัะบะธะผ ัะฐะทะดะตะปะตะฝะธะตะผ ะพัะฒะตัััะฒะตะฝะฝะพััะธ:

```
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   Telegram Bot  โ    โ   Message       โ    โ   LLM Router    โ
โ   Interface     โโโโโบโ   Handlers      โโโโโบโ   (Simple)      โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
         โ                       โ                       โ
         โ                       โ                       โ
         โผ                       โผ                       โผ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
โ   Configuration โ    โ   LLM Service   โ    โ   External      โ
โ   Management    โ    โ   (ProxyAPI)    โ    โ   LLM APIs      โ
โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ    โโโโโโโโโโโโโโโโโโโ
```

## ๐ง ะะปััะตะฒัะต ะบะพะผะฟะพะฝะตะฝัั

### 1. Telegram Bot Interface
- **ะะฐะทะฝะฐัะตะฝะธะต**: ะะทะฐะธะผะพะดะตะนััะฒะธะต ั Telegram Bot API
- **ะคะฐะนะป**: `src/app/app.js`
- **ะัะฒะตัััะฒะตะฝะฝะพััั**: ะะพะปััะตะฝะธะต ะธ ะพัะฟัะฐะฒะบะฐ ัะพะพะฑัะตะฝะธะน

### 2. Message Handlers
- **ะะฐะทะฝะฐัะตะฝะธะต**: ะะฑัะฐะฑะพัะบะฐ ัะฐะทะปะธัะฝัั ัะธะฟะพะฒ ัะพะพะฑัะตะฝะธะน
- **ะคะฐะนะปั**: `src/handlers/`
- **ะัะฒะตัััะฒะตะฝะฝะพััั**: ะะฐัััััะธะทะฐัะธั ัะพะพะฑัะตะฝะธะน ะบ ัะพะพัะฒะตัััะฒัััะธะผ ะพะฑัะฐะฑะพััะธะบะฐะผ

### 3. LLM Router
- **ะะฐะทะฝะฐัะตะฝะธะต**: ะัะพััะฐั ะพะฑัะฐะฑะพัะบะฐ ัะพะพะฑัะตะฝะธะน ัะตัะตะท LLM
- **ะคะฐะนะป**: `src/modules/router/router.js`
- **ะัะฒะตัััะฒะตะฝะฝะพััั**: ะกะพะทะดะฐะฝะธะต LLM ัะตัะฒะธัะฐ, ะทะฐะฟัะพั ะบ LLM ะธ ะฒะพะทะฒัะฐั ะพัะฒะตัะฐ

### 4. LLM Service
- **ะะฐะทะฝะฐัะตะฝะธะต**: ะะฝัะตะณัะฐัะธั ั ะฒะฝะตัะฝะธะผะธ LLM API ัะตัะตะท ProxyAPI
- **ะคะฐะนะป**: `src/services/llm/llmService.js`
- **ะัะฒะตัััะฒะตะฝะฝะพััั**: ะะทะฐะธะผะพะดะตะนััะฒะธะต ั ัะทัะบะพะฒัะผะธ ะผะพะดะตะปัะผะธ

### 5. Configuration Management
- **ะะฐะทะฝะฐัะตะฝะธะต**: ะฃะฟัะฐะฒะปะตะฝะธะต ะบะพะฝัะธะณััะฐัะธะตะน ะฟัะธะปะพะถะตะฝะธั
- **ะคะฐะนะปั**: `src/config/`
- **ะัะฒะตัััะฒะตะฝะฝะพััั**: ะะฐะณััะทะบะฐ ะฝะฐัััะพะตะบ ะดะปั ัะฐะทะฝัั ะพะบััะถะตะฝะธะน

## ๐ ะะพัะพะบะธ ะดะฐะฝะฝัั

### ะะฑัะฐะฑะพัะบะฐ ะฒัะพะดััะตะณะพ ัะพะพะฑัะตะฝะธั:

```
1. Telegram Bot API โ App.js
2. App.js โ Message Handler (ะฟะพ ัะธะฟั ัะพะพะฑัะตะฝะธั)
3. Message Handler โ LLM Router (ะดะปั ัะตะบััะพะฒัั ัะพะพะฑัะตะฝะธะน)
4. LLM Router โ LLM Service โ External LLM API
5. LLM Service โ Router โ Handler โ ะัะฒะตั ะฟะพะปัะทะพะฒะฐัะตะปั
```

### ะะฑัะฐะฑะพัะบะฐ ัะตะบััะพะฒะพะณะพ ัะพะพะฑัะตะฝะธั:

```
1. TextMessageHandler ะฟะพะปััะฐะตั ัะพะพะฑัะตะฝะธะต
2. ะกะพะทะดะฐะตั SimpleRouter (ะปะตะฝะธะฒะฐั ะทะฐะณััะทะบะฐ)
3. ะะพััะตั ัะพะทะดะฐะตั LLM ัะตัะฒะธั (ะปะตะฝะธะฒะฐั ะทะฐะณััะทะบะฐ)
4. ะะตะปะฐะตั ะทะฐะฟัะพั ะบ LLM ัะตัะตะท ProxyAPI
5. ะะพะปััะฐะตั ะพัะฒะตั ะธ ะฒะพะทะฒัะฐัะฐะตั ะตะณะพ
6. ะัะฒะตั ะพัะฟัะฐะฒะปัะตััั ะฟะพะปัะทะพะฒะฐัะตะปั
```

## ๐ฏ ะัะธะฝัะธะฟั ะฐััะธัะตะบัััั

### 1. ะะพะดัะปัะฝะพััั
- ะะฐะถะดัะน ะบะพะผะฟะพะฝะตะฝั ะธะผะตะตั ัะตัะบะพ ะพะฟัะตะดะตะปะตะฝะฝัั ะพัะฒะตัััะฒะตะฝะฝะพััั
- ะะพะดัะปะธ ัะปะฐะฑะพ ัะฒัะทะฐะฝั ะผะตะถะดั ัะพะฑะพะน
- ะะตะณะบะพ ะดะพะฑะฐะฒะปััั ะฝะพะฒัะต ััะฝะบัะธะธ

### 2. ะัะพััะพัะฐ
- ะะธะฝะธะผะฐะปัะฝะฐั ัะปะพะถะฝะพััั ะดะปั ะฟะพะฝะธะผะฐะฝะธั
- ะััะผะพะปะธะฝะตะนะฝัะต ะฟะพัะพะบะธ ะดะฐะฝะฝัั
- ะััััััะฒะธะต ะธะทะฑััะพัะฝะพะน ะฐะฑัััะฐะบัะธะธ

### 3. LLM-ัะตะฝััะธัะฝะพััั
- ะัะต ัะตะบััะพะฒัะต ัะพะพะฑัะตะฝะธั ะพะฑัะฐะฑะฐััะฒะฐัััั ัะตัะตะท LLM
- ะัะพััะฐั ะธะฝัะตะณัะฐัะธั ั ะฒะฝะตัะฝะธะผะธ API
- Fallback ะพัะฒะตัั ะฟัะธ ะฝะตะดะพัััะฟะฝะพััะธ LLM

### 4. ะะฐะดะตะถะฝะพััั
- Fallback ะพัะฒะตัั ะฟัะธ ะพัะธะฑะบะฐั
- ะะตะฝะธะฒะฐั ะทะฐะณััะทะบะฐ ะบะพะผะฟะพะฝะตะฝัะพะฒ
- ะะฑัะฐะฑะพัะบะฐ ะธัะบะปััะตะฝะธะน ะฝะฐ ะฒัะตั ััะพะฒะฝัั

## ๐ ะะฝัะตััะตะนัั

### Router Interface
```javascript
class SimpleRouter {
  processText(text)         // ะะฑัะฐะฑะพัะฐัั ัะตะบัั ัะตัะตะท LLM
  isReady()                 // ะัะพะฒะตัะธัั ะณะพัะพะฒะฝะพััั
  getInfo()                 // ะะพะปััะธัั ะธะฝัะพัะผะฐัะธั
}
```

### Message Handler Interface
```javascript
class TextMessageHandler {
  handleTextMessage(msg)    // ะะฑัะฐะฑะพัะฐัั ัะพะพะฑัะตะฝะธะต
  canHandle(msg)            // ะัะพะฒะตัะธัั ะฒะพะทะผะพะถะฝะพััั ะพะฑัะฐะฑะพัะบะธ
  getModuleInfo()           // ะะพะปััะธัั ะธะฝัะพัะผะฐัะธั ะพ ะผะพะดัะปะต
}
```

## ๐ ะะปะฐะฝั ัะฐะทะฒะธัะธั

### ะัะฐัะบะพััะพัะฝัะต (v4.1)
- ะฃะปัััะตะฝะธะต ะธะฝัะตะณัะฐัะธะธ ั LLM API
- ะะฐััะธัะตะฝะธะต ะบะพะฝัะธะณััะฐัะธะธ ProxyAPI
- ะฃะปัััะตะฝะธะต fallback ะพัะฒะตัะพะฒ

### ะกัะตะดะฝะตััะพัะฝัะต (v4.2)
- ะััะธัะพะฒะฐะฝะธะต LLM ะพัะฒะตัะพะฒ
- ะะตััะธะบะธ ะฟัะพะธะทะฒะพะดะธัะตะปัะฝะพััะธ LLM
- ะกะธััะตะผะฐ ะฟะปะฐะณะธะฝะพะฒ ะดะปั LLM

### ะะพะปะณะพััะพัะฝัะต (v5.0)
- ะัะปััะธะผะพะดะฐะปัะฝัะต LLM (ะธะทะพะฑัะฐะถะตะฝะธั, ะฐัะดะธะพ)
- ะะตััะพะฝะฐะปะธะทะฐัะธั LLM ะพัะฒะตัะพะฒ
- ะะฝัะตะณัะฐัะธั ั ะฒะตะบัะพัะฝัะผะธ ะฑะฐะทะฐะผะธ ะดะฐะฝะฝัั

## ๐ ะะตััะธะบะธ ะบะฐัะตััะฒะฐ

- **ะัะพััะพัะฐ**: ะะธะฝะธะผะฐะปัะฝะพะต ะบะพะปะธัะตััะฒะพ ะทะฐะฒะธัะธะผะพััะตะน
- **ะงะธัะฐะตะผะพััั**: ะะพะฝััะฝัะน ะบะพะด ะฑะตะท ัะปะพะถะฝะพะน ะปะพะณะธะบะธ
- **LLM ะธะฝัะตะณัะฐัะธั**: ะกัะฐะฑะธะปัะฝะฐั ัะฐะฑะพัะฐ ั ะฒะฝะตัะฝะธะผะธ API
- **ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั**: ะััััะฐั ะพะฑัะฐะฑะพัะบะฐ ัะตัะตะท LLM

## ๐ ะัะปะฐะดะบะฐ ะธ ะผะพะฝะธัะพัะธะฝะณ

### ะะพะณะธัะพะฒะฐะฝะธะต
- ะะพะดัะพะฑะฝัะต ะปะพะณะธ ะฝะฐ ะบะฐะถะดะพะผ ััะฐะฟะต ะพะฑัะฐะฑะพัะบะธ
- ะะฝัะพัะผะฐัะธั ะพ LLM ะทะฐะฟัะพัะฐั ะธ ะพัะฒะตัะฐั
- ะกัะฐัะธััะธะบะฐ ะธัะฟะพะปัะทะพะฒะฐะฝะธั LLM

### ะะพะฝะธัะพัะธะฝะณ
- ะกัะฐััั ะณะพัะพะฒะฝะพััะธ ะบะพะผะฟะพะฝะตะฝัะพะฒ
- ะะพะปะธัะตััะฒะพ ะพะฑัะฐะฑะพัะฐะฝะฝัั ัะพะพะฑัะตะฝะธะน
- ะัะตะผั ะพัะบะปะธะบะฐ LLM API
- ะัะธะฑะบะธ LLM ะธะฝัะตะณัะฐัะธะธ

---

*ะะปั ะดะตัะฐะปัะฝะพะน ะธะฝัะพัะผะฐัะธะธ ะพ ััััะบัััะต ะฟัะพะตะบัะฐ ัะผ. [ะกัััะบัััะฐ ะฟัะพะตะบัะฐ](structure.md) ะธ [ะะพัะพะบะธ ะดะฐะฝะฝัั](data-flow.md).*
